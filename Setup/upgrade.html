<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Zikula Core</title>
        <link rel="stylesheet" href="https://docs.ziku.la/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://docs.ziku.la/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://docs.ziku.la/css/highlight.tomorrow-night.css">
        <link rel="stylesheet" href="https://docs.ziku.la/css/main.css">

        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
    </head>
    <body>
        <header class="navbar fixed-top navbar-dark bg-dark">
            <a class="navbar-brand" href="https://docs.ziku.la/" class="align-items-center">
                <img src="/favicon-32x32.png" alt="Zikula" />
                Zikula Core
                <small class="d-none d-lg-inline">
                    Zikula CMS and Symfony framework
                </small>
            </a>
                            <a href="https://github.com/zikula/core">
                    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://docs.ziku.la/images/fork.png" alt="Fork me on GitHub" />
                </a>
                    </header>
        <main class="container-fluid">
            <div class="row">
                                    <nav id="sidebar" class="col-md-3 col-xl-2" role="navigation">
                                                    <p class="text-muted">
                                <a href="#section1" data-toggle="collapse">
                                    General
                                </a>
                            </p>
                            <ul id="section1" class="nav flex-column collapse show">
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/index.html" class="nav-link">
                                            About
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/General/Contributing/index.html" class="nav-link">
                                            Contributing
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/General/Releases/index.html" class="nav-link">
                                            Roadmap and Releases
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/General/vendorinformation.html" class="nav-link">
                                            Vendor information
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                <a href="#section2" data-toggle="collapse">
                                    Setup
                                </a>
                            </p>
                            <ul id="section2" class="nav flex-column collapse">
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Setup/requirements.html" class="nav-link">
                                            Requirements
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Setup/installation.html" class="nav-link">
                                            Installation
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Setup/upgrade.html" class="nav-link active">
                                            Upgrade 2 to 3
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Setup/upgradefrom3to3.x.x.html" class="nav-link">
                                            Upgrade 3 to 3
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Setup/production.html" class="nav-link">
                                            Deployment
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                <a href="#section3" data-toggle="collapse">
                                    Configuration
                                </a>
                            </p>
                            <ul id="section3" class="nav flex-column collapse">
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Configuration/BundleConfig/index.html" class="nav-link">
                                            Bundle config
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Configuration/Settings/index.html" class="nav-link">
                                            Main settings
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Configuration/Localisation/index.html" class="nav-link">
                                            Localisation
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Configuration/Mailer/index.html" class="nav-link">
                                            Mailer
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Configuration/AdminPanel/index.html" class="nav-link">
                                            Admin panel
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Configuration/Security/index.html" class="nav-link">
                                            Security center
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Configuration/Extensions/index.html" class="nav-link">
                                            Extensions
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Configuration/Routes/index.html" class="nav-link">
                                            Routes
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Configuration/Workflows/index.html" class="nav-link">
                                            Workflows
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                <a href="#section4" data-toggle="collapse">
                                    Content
                                </a>
                            </p>
                            <ul id="section4" class="nav flex-column collapse">
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Content/pages.html" class="nav-link">
                                            Static pages
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Content/blocks.html" class="nav-link">
                                            Blocks
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                <a href="#section5" data-toggle="collapse">
                                    Access Control
                                </a>
                            </p>
                            <ul id="section5" class="nav flex-column collapse">
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/AccessControl/Groups/index.html" class="nav-link">
                                            Groups
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/AccessControl/Users/index.html" class="nav-link">
                                            Users
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/AccessControl/Authentication/index.html" class="nav-link">
                                            Authentication
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/AccessControl/Permissions/index.html" class="nav-link">
                                            Permissions
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                <a href="#section6" data-toggle="collapse">
                                    Layout &amp; Design
                                </a>
                            </p>
                            <ul id="section6" class="nav flex-column collapse">
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/LayoutDesign/Templating/index.html" class="nav-link">
                                            Templating
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/LayoutDesign/Themes/index.html" class="nav-link">
                                            Themes
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/LayoutDesign/Blocks/index.html" class="nav-link">
                                            Blocks
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/LayoutDesign/Menus/index.html" class="nav-link">
                                            Menus
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/LayoutDesign/Forms/index.html" class="nav-link">
                                            Forms
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                <a href="#section7" data-toggle="collapse">
                                    Translation
                                </a>
                            </p>
                            <ul id="section7" class="nav flex-column collapse">
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Translation/index.html" class="nav-link">
                                            Overview
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                <a href="#section8" data-toggle="collapse">
                                    Integration
                                </a>
                            </p>
                            <ul id="section8" class="nav flex-column collapse">
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Integration/Categories/index.html" class="nav-link">
                                            Categories
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Integration/Search/index.html" class="nav-link">
                                            Search
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                <a href="#section9" data-toggle="collapse">
                                    Extension Development
                                </a>
                            </p>
                            <ul id="section9" class="nav flex-column collapse">
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Development/General/index.html" class="nav-link">
                                            General
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Development/Doctrine/index.html" class="nav-link">
                                            Databases & Doctrine
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Development/Extensions/index.html" class="nav-link">
                                            Extension services
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Development/Hooks/index.html" class="nav-link">
                                            Hooks
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://docs.ziku.la/Development/Misc/index.html" class="nav-link">
                                            Misc
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://modulestudio.de/en/documentation/10-introduction/" class="nav-link">
                                            Model-driven approach
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                <a href="#section10" data-toggle="collapse">
                                    Resources
                                </a>
                            </p>
                            <ul id="section10" class="nav flex-column collapse">
                                                                    <li class="nav-item">
                                        <a href="https://ziku.la" class="nav-link">
                                            Zikula website
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://github.com/zikula/core" class="nav-link">
                                            <i class="fab fa-github"></i> GitHub
                                        </a>
                                    </li>
                                                                    <li class="nav-item">
                                        <a href="https://joinslack.ziku.la/" class="nav-link">
                                            <i class="fab fa-slack"></i> Slack
                                        </a>
                                    </li>
                                                            </ul>
                                            </nav>
                                <section class="offset-md-3 offset-xl-2 col-md-9 col-xl-10">
                    <h1 id="upgrading-zikula-1x-or-2x-to-3xx">Upgrading Zikula 1.x or 2.x to 3.x.x</h1>
<p>This document is the upgrade process for <strong>Zikula Core 1.x or 2.x to 3.x.x</strong>. If you are upgrading from a version <strong>greater</strong> than
3.0.0 please use the proper <a href="upgradefrom3to3.x.x.html">upgrade document</a>. The minimum upgrade version is Zikula Core 1.4.3.
Please upgrade to at least this version before attempting to upgrade to Core-3.0.x.</p>
<ol>
<li><a href="#test-environment">Test Environment</a></li>
<li><a href="#download">Before upgrading</a></li>
<li><a href="#upgrading">Upgrading</a></li>
</ol>
<h2 id="backup-your-current-files-and-database">Backup your current files and database!</h2>
<p><strong><em>Prior to any upgrade ensure that you have created a reliable backup of all files and the database.</em></strong></p>
<h2 id="test-environment">Test Environment</h2>
<p>The Zikula team strongly recommends having a duplicate testing environment of the live site in which all
changes including upgrades are tested on before application to the live site.</p>
<h2 id="download">Download</h2>
<p>Download the current release from <a href="https://github.com/zikula/core/releases/">GitHub releases</a>
All the dependencies and requirements are included in this package.</p>
<h2 id="upgrading">Upgrading</h2>
<ul>
<li>Make a note of your 'startpage' settings as they must be cleared in the upgrade process.</li>
<li>Before uploading the new files, delete (or move) <strong>all files</strong> in your web root (typically <code>public_html</code> or <code>httpdocs</code>).</li>
<li>Upload the new package and unpack the archive.
<ul>
<li>Please read the <a href="install.html#upload">INSTALL docs</a> for detailed information on proper uploading.</li>
<li>Ensure that the <code>/var/cache</code> and <code>/var/log</code> directories must be writable both by the web server and the command line user.
See Symfony's <a href="http://symfony.com/doc/current/setup/file_permissions.html">Setting up or Fixing File Permissions</a>
to see potential solutions to this problem when installing from the CLI.</li>
<li>If you have <code>mod_suexec</code> installed for Apache the CLI will run into permission problems. (If you are not sure
check your phpinfo.) <code>mod_suexec</code> is often used in shared hosting environments. In this case, the CLI installer is not
recommended. Instead, please use the Web Installer.</li>
</ul></li>
<li>Please note, your <em>web root</em> <strong>must</strong> now point to the <code>public/</code> directory. Adjust your symlinks or directory structure as needed.
(see <a href="https://symfony.com/doc/current/setup/web_server_configuration.html">https://symfony.com/doc/current/setup/web_server_configuration.html</a> for more information).</li>
</ul>
<h3 id="continue">Continue</h3>
<ul>
<li>Copy old files to <em>new</em> locations:
<ul>
<li>Copy your previous installation's <code>/app/config/custom_parameters.yml</code> to <code>/config/services_custom.yaml</code> in your new installation.
<ul>
<li>note the name change and the suffix changed from <code>.yml</code> to <code>.yaml</code></li>
<li>When the upgrade to 3.1.0 is complete, the file will be deleted because the values are moved to config files.</li>
</ul></li>
<li>Copy your <em>compatible</em> custom theme to the <code>src/extensions</code> directory (There is no <code>/themes</code> directory any longer).
<ul>
<li>After upgrade, the site will default to the ZikulaDefaultTheme until you complete testing of your custom theme.</li>
</ul></li>
<li>Return <em>compatible</em> modules (extensions) to the <code>src/extensions</code> directory.
<ul>
<li><strong>DO NOT copy the old Profile and Legal module</strong> as new versions of these are provided, and their location may differ.</li>
<li>Check compatibility in the <code>/composer.json</code> file is: <code>"extra": { "zikula" : { "core-compatibility": "&gt;=3.0.0"</code>
(&quot;&gt;=2.0.0&quot; is <em>not</em> compatible with 3.x) or ask in the Zikula slack channel.</li>
</ul></li>
<li>Copy your backup contents of <code>/userdata</code> (1.x) or <code>/web/uploads</code> (2.x) into <code>/public/uploads</code></li>
</ul></li>
<li>
<p>Then <strong>start the upgrade (do one or the other, CLI is recommended)</strong></p>
<ul>
<li>
<p>Via Web: launch <code>http://yoursiteurl/</code> (you will be redirected to <code>/upgrade</code>) and follow any on-screen prompts.</p>
</li>
<li>
<p>Via CLI:</p>
</li>
<li>
<p>Access your main zikula directory then run each of these commands:</p>
<pre><code class="language-Shell">php bin/console zikula:pre-upgrade
php bin/console zikula:upgrade</code></pre>
</li>
<li>
<p>Follow the prompts and complete that step. When you are finished, Open your browser and login!</p>
</li>
<li>
<p>Visit the extensions page and run each module upgrade one at a time.</p>
</li>
</ul>
</li>
</ul>
<h3 id="post-upgrade">Post Upgrade</h3>
<ul>
<li>MySQL databases will have been recoded from <code>utf8</code> to <code>utf8mb4</code>.
<ul>
<li>old copies of <code>app/config/config.yml</code> may have contained a reference to <code>doctrine.dbal.connections.default.charset</code> but this is removed.</li>
</ul></li>
<li>Double check FontAwesome icons in your menu module options. An attempt has been made to correct them, but manual correction may be required. You can lookup icon name changes between FontAwesome version 4 and 5 <a href="https://fontawesome.com/how-to-use/on-the-web/setup/upgrading-from-version-4#name-changes">at this page</a>.</li>
<li>Blocks with properties/content that could not be unserialized have been deleted. The content of the block has been dumped to <code>/var/log/removedBlock#.txt</code> for recovery if desired.</li>
</ul>
                </section>
            </div>
        </main>
        <script src="https://docs.ziku.la/js/jquery.min.js"></script>
        <script src="https://docs.ziku.la/js/bootstrap.bundle.min.js"></script>
        <script src="https://docs.ziku.la/js/highlight.pack.js"></script>
        <script src="https://docs.ziku.la/js/site.js"></script>
    </body>
</html>
